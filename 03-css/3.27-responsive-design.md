# Responsive design

_Responsive design_ aims to provide the best experience for whatever device a user is viewing a site on from a 27" display all the way down to a mobile phone screen.

![Screenshot of the Stripe website on 4 devices of varying sizes from mediaqueri.es](https://hychalknotes.s3.amazonaws.com/mediaqueri.es-stripe.png)

Previously web developers would create what were called _m dot_ sites (as in http://m.yoursite.com), which would be the mobile version of the regular site. This meant that developers had to create two independent sites and update them both when they had new content. Not very efficient!

A developer described one solution to these problems with the term [responsive design](https://alistapart.com/article/responsive-web-design) and introduced the concept of a single codebase and one website that reacts to the user's viewport. 

![Screenshot of the NASA website on 4 devices of varying sizes from mediaqueri.es](https://hychalknotes.s3.amazonaws.com/mediaqueri.es-nasa.png)

## How to make a site responsive

To make a responsive website, you need two things:
* a special `meta` tag  
* _media queries_ in your CSS

### `<meta name="viewport">`

Remember that `meta` tags go inside the `head` tag to provide information about the webpage to the browser but not the user. 

`<meta name="viewport" content="width=device-width, initial-scale=1.0">`

1. `meta` is the name of the tag.
1. `viewport` is the value of the `name` attribute. It specifies what this  `meta` applies to.
1. `content` is where we provide the information about the viewport. We provide as many key-value pairs as we want here, each comma separated.
  1. `width=device-width` tells the browser how wide the website should be. We can set this to an explicit pixel value but because that value varies by device, we use the `device-width` keyword to tell the browser that this site should be as wide as the device.
  1. `initial scale` is how much the site is zoomed in or out by default. A value of 1.0 will render the size just as it is, no zoom in or out. A value of 0.5 would zoom it out while 1.5 would zoom it in.

  1. `user-scalable=no` (not shown in tag above), will limit users from being able to zoom into your website. This is helpful if you are providing a mobile-optimized experience and zooming/panning is not required.
  1. `minimum-scale` and `maximum-scale` will limit how far in or out a user is allowed to scale (i.e. zoom).

You should **always** put this tag into the `head` of your document. Without this tag, your site **will not be responsive**. It will render as a shrunk down version of your desktop site. 

However, this tag won't automatically re-style your site on smaller screen sizes but it will ensure that media queries are implemented.

### Media queries

Once you've added the viewport tag, _media queries_ are what actually make your site responsive. Media queries are conditional statements for your CSS that start with the `@media` keyword.

```css
@media (max-width: 940px) {
  body {
    background:red;
  }
}
```

This media query is saying "for all media, up until the screen is 940px wide, the background is red."

Notice how we nested our CSS inside of what looks like another CSS rule? If we have more than one rule it would look like this:

```css
@media (max-width: 940px) {
  body {
    background:red;
  }
  h2 {
    font-size:20px;
  }
}
```

The pixel value here is what we call a _breakpoint_. Breakpoints are the conditions under which a certain set of CSS rules are applied. An easy way to visualize breakpoints in development is to set a background color on the body to make it obvious which breakpoint you are in.

Open [responsive1.html](https://hychalknotes.s3.amazonaws.com/responsive1.html) in your editor and browser and let's take a look through the code.

Dev tools has introduced a ruler that shows you pixel values. You can use that or inspect the body of your page to get the current page width and height.

#### Media query for width

The most common media queries target the width of a device.

```css
@media (max-width: 940px) {
  body {
    background:red;
  }
}
```

The above example designates **only** a `max-width`, which means that the rule applies to every screen width below that. Sometimes we will want to limit our CSS to a certain range of pixel values:

```css
  /* Portrait tablet to landscape and desktop */
  @media (min-width: 768px) and (max-width: 940px) { }
```

The code between the curly brackets will only be run when the width of your browser is equal to or greater than 768px **and** less than or equal to 940px.

These bounded media queries can be helpful when you are targeting a specific size of screen. If, however, you want your CSS to apply to every screen size below the one targeted, leave out the `min-width` like we did in our first example. 

#### Media query for height

Occasionally you may want to check if a device has a certain height.

Imagine that you have a header set to `height: 100vh` with a long title inside of it. On phones with short screens or small tablets in landscape mode the title might get cut off or break out of its container. We can avoid this by having the header automatically size itself to its contents once the screen is below a certain height:

```css
header {
  height: 100vh;
  /* For most screens with enough height to contain the content */
}

@media (max-height: 600px) {
  header {
    height: auto;
    /* For screens under 600px */
  }
}
```

If the issue only applies when the screen is narrow (like on a phone), squishing the title in and making it longer, you can also combine a media query for height and one for width: 

```css
 @media (max-height: 660px) and (max-width: 450px) {
  header {
    height: auto;
  }
}
```

**You shouldn't rely on height media queries** too much beyond cases like the one above! Using height media queries for design decisions is tricky and unreliable, because browser heights are even more unpredictable than widths. Some things to note:

  1. A phone's browser bar takes up height and there's generally a context menu at the bottom of a phone screen.
  2. People may be viewing your site from an in-app browser (e.g. from Facebook or Twitter).
  3. Some people use Google Chrome on the iPhone which takes up a different amount of vertical height than Safari.

Trying to target a specific device is not a good idea: you are better off using width media queries most of the time.

#### Media query for orientation

Orientation is which way you are holding a device: portrait or landscape.

![iPhone in portrait and landscape mode](http://wes.io/Kk2i/iPhone-5-Black-White-MockUp.png)

It's less important to think about the width of the landscape screen (width media queries can direct your styles) and more important to think about **why** the user holding their phone at that particular orientation. If they are holding the device in portrait rather than landscape, there may be a few things to consider:

  1. How many hands might they be using to touch the screen? Are they in a grocery store line with one hand available? Or sitting on the couch getting some hardcore screen time in?
  1. Where might you want to place certain controls (e.g. buttons on an online game) when they are in landscape vs. portrait?

So you might use a media query like this one to target iPad-sized tablets:

```css
@media (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) {
  /* styles */
}
```

For most cases, **you will be okay using width media queries** instead of orientation. But we tell you so you know. üôè

#### Media query for pixel resolution

Pixels can bend your mind (especially if you are coming from a print background where everything is in 300 DPI and measured in inches).

Pixels don't necessarily correspond to the physical size of the screen: a 50-inch 1080p TV is 1080px high while a 9-inch ipad is 1536px high. Lately devices have come out that are what we call _High Density Pixels_ (HiDPI). The marketing term for this kind of resolution is "retina". The number of pixels on these devices is doubled and crammed into the same sized screen as their regular density kinfolk, which results in a sharper image.

Here is a nice graphic from [Smashing magazine](https://www.smashingmagazine.com/2012/08/towards-retina-web/) on the topic:

![retina display graphic](http://wes.io/Kjax/Screen%20Shot%202012-11-07%20at%202.37.48%20PM.png)

However: very little has changed for our CSS. A 640px-wide HiDPI phone screen still registers as 320px wide. This is nice because we don't need to write another set of CSS just for HiDPI devices. The values for our text, borders, colors, etc. are all normalized for HiDPI.

However, our images and graphics are blown up to 2x the size which can result in blurry images. The solution to this issue is to use a device resolution media query to sub in images that are 2x the size of the normal ones.

```css
.myButton {
  background: url(images/buttonBG.png) center no-repeat;
}

/* feed HiDPI screens a bigger background image */
@media 	(-webkit-min-device-pixel-ratio: 2), 
    (min-resolution: 192dpi) {
      .myButton {
        background:url(images/buttonBG@2x.png) center no-repeat;
              background-size: 50%;
        /* Because background images appear at the native dimensions, it's recommended to scale the retina-sized images down to 50%. */
    }
}
```

Note that above we use both the more widely-functional `min-resolution` query, and the vendor-prefixed `-webkit-min-device-pixel-ratio` to account for a few specific special-requirement cases (for details, take a look at [CanIUse](https://caniuse.com/#feat=css-media-resolution)).

#### Other media queries

We are usually only concerned with device width and sometimes the device height, however there are a ton more ways that you can use media queries

* **color** - if you could somehow get a web browser on an old gameboy color, you could target low or no bits of color.

```css
@media all and (color:0) and (width:160px) and (height:144px) {
  /* Target original gameboy */ 
}
```

  * **print** - when someone prints a web page, your `@media (print)` CSS rules can remove pieces that aren't needed.
  * **monochrome** - targets monochrome screens (like Kindles)
  * **progressive scan** - important pretty much only if you are making TV web apps
  * **mac theme,windows theme** - targets specific themes on Mac or Windows

There aer a bunch more on [MDN](https://developer.mozilla.org/en-US/docs/CSS/Media_queries).

### Breakpoints

In general, we don't want to create breakpoints based on specific device models. There are hundreds of screen sizes out there now and more to come. Instead of choosing specific device sizes at which to add breakpoints, create them based on the design and content of your website. For certain edge cases where you want to target specific devices, check out [this resource by Chris Coyier](https://css-tricks.com/snippets/css/media-queries-for-standard-devices/) which provides media queries for standard device sizes. 

In the broadest sense, these breakpoints correspond to general device sizes but they are by no means exhaustive:
```css
/* Portrait tablet and small desktops */
@media (max-width: 940px) {
}

/* Landscape phone to portrait tablet */
@media (max-width: 768px) {
}

/* Landscape phones and down */
@media (max-width: 480px) {
}
```

As you design your site, you may need breakpoints that are larger, smaller, or in between some of these. Don't feel like you need to use these three exact media queries! **Create breakpoints based on your design/content.** 

### Responsive layouts
<!-- Add section about how to create them, probably -->
Percentage widths on your elements are gonna be your good pals when creating responsive layouts, but even they can't do **all** the work.

Download [responsive2.html](https://hychalknotes.s3.amazonaws.com/responsive2.html) and zoom all the way out on your dev tools (`cmd + - ` Mac and `ctrl + -` on Windows) to emulate a very wide screen - an external monitor, perhaps. See how all the content gets unreadably streeeeeeeeeeetched?

#### Scaling content within the browser window

To keep it contained, add a `max-width` property to the wrapper. Like so:

```css
.wrapper {
  width:70%;
  margin: 0 auto;
  max-width:960px;
}
```
This allows the wrapper to be any size up to this value.

#### Scaling images within their parent containers

It's pretty common for your big, beautiful desktop images... 

![screenshot of an image staying within its browser](https://hychalknotes.s3.amazonaws.com/image-within-container.png)

...to be way too large for small screens.

![screenshot of an image breaking out of its container in a browser](https://hychalknotes.s3.amazonaws.com/image-breaking-out-of-container.png)

Open up [responsiveImages.html](https://hychalknotes.s3.amazonaws.com/responsiveImages.html) to get an idea of this issue.

The fix is easy. We apply `max-width:100%;` to all images. This ensures that images are never larger than their parent elements.

```css
img {
  max-width: 100%;
}
```

Try changing the size of the parent container!

## Responsive Testing

Testing responsive designs are really easy and you don't need a mobile device to do it!

You simply need to resize your browser to the approximate size of your device. Here are a few more tips:

1. Dock your dev tools to the right of the screen. Click the three dots in the top right of your dev tools and check 'Dock to right'.
  
  ![screencap of the dev tools location menu](https://hychalknotes.s3.amazonaws.com/dev-tools-location-menu.png)

1. You may want to break your dev tools away into a new window - click the window icon in the bottom left corner to pop them out.
1. Check out the new firefox developer tools responsive design view. Go to `Tools` --> `Web Developer` --> `Responsive Design View`
1. Chrome has a similar device emulator. Click the phone icon in your devtools toolbar to open it and test out different screen sizes and connection speeds.

### Helpful Patterns
There are a lot of common patterns and problems that you will find when it comes to creating a responsive site. There is a great resource from Brad Frost called <a href="https://bradfrost.github.io/this-is-responsive/patterns.html" target="_blank">Responsive Patterns</a> that will give you a lot of great examples and code for common issues.

## Responsive Exercises

### Revisiting Responsive Navigation (flexbox lesson)
Let's revisit the flexbox navigation exercise from the previous lesson! Work off of what you have so far, or download the <a href="https://hychalknotes.s3.amazonaws.com/navigation.zip" download>styled navigation zip file</a> and make it responsive! Check out the answer key in your browser to see what it's supposed to look like: <a href="https://hychalknotes.s3.amazonaws.com/navigation-answer.zip" download>navigation-answer.zip</a>

### More exercises
Now we are going to work on exercises. Starting with easy media queries and moving on up in complexity. See <a href="https://hychalknotes.s3.amazonaws.com/responsive-exercises.zip" class="exercise" download>responsive-exercises.zip</a> for the exercises and answers.