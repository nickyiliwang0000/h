## Axios

So far we have been using jQuery's `$.ajax()` method to make our AJAX requests but now that we are entering the Land of React, we will not be relying on jQuery for any kind of DOM manipulation. 

Because `$.ajax()` is not the only way to make an AJAX request, there are other options that we can explore.

Just to name a couple:

#### Fetch
The `fetch()` is a native function that allows us to make AJAX requests in the browser. `fetch` works in all modern browsers expect for IE 11 and Opera Mini. If you need to support older browsers, a polyfill is available. To read more about the fetch syntax, [check out this article](https://developers.google.com/web/updates/2015/03/introduction-to-fetch).

#### Axios
Axios is a new library that does a really great job at simplifying AJAX requests for us. Axios works very similarly to `$.ajax()` but does have a few slight differences.

It is important to note that all of these different methods of making our requests are promise-based! We will look at the `get` method; the result from the `get` method is a promise.

Don't remember what a promise is? Review lesson on Promises [here](https://notes.hackeryou.com/lesson/588661f3d2f16a4a535b443b/5ac38e019f86d2f20b0e6474).

## GET request with Axios

In the future, we will be using Axios to make AJAX requests in our React apps. 

Here is an example of a GET request using Axios. We are going to append the `.get()` method and pass in the URI as an argument. 

```javascript
axios.get('http://api.site.com/api')
  .then((res) => {
    console.log(res);
  });
```
We can also write a GET request as follows:
```javascript
axios({
  method:'GET',
//a bunch of other stuff
})
```
Same same!

The above example shows that we are sending a GET request to a specified URI and logging the response. Axios already assumes that the response will be a JSON object for us, so we don't need to specify any additional options.

If you want to specify query parameters, we can pass them to a configuration object as a second argument where we specify our query params inside of the `params` property like this:

```javascript
axios.get('http://api.site.com/api', {
    params: {
      queryParam: 'value'
    }
  })
  .then(function (res) {
    console.log(res);
  });
```
That is the same as doing this:
```javascript
axios( {
  method:'GET',
  url: 'http://api.site.com/api',
  dataResponse: 'json',
    params: {
      queryParam: 'value'
    }
  })
  .then(function (res) {
    console.log(res);
  });
```


## Axios with a proxy server

However, you will need to use a proxy server to access your data under the following conditions: 

- If the API requires JSONP
- If the data coming back from your API needs to be converted from XML format to JSON
- If you need to cache the data
- If you need to request insecure data (from an http endpoint) from a secure site (https) 

If any of these are the case, we recommend using the HackerYou proxy server. Your code will look something like this:

```javascript
axios({
  method:'GET',
  url: 'http://proxy.hackeryou.com',
  //OR url: 'https://proxy.hackeryou.com',
  dataResponse:'json',
  params: {
    reqUrl: 'http://api.site.com/api',
    proxyHeaders: {
      'header_params': 'value'
    },
    xmlToJSON: false
  }).then((res) => {
    console.log(res);
  });
```

## Specifying query parameters with a proxy server

If you are using a proxy server and want to include query parameters as part of our request, we will have to include a `paramsSerializer` method as a parameter inside of the request object.

```javascript
paramsSerializer: function(params) {
  return Qs.stringify(params, {arrayFormat: 'brackets'})
}
```

This method will be in charge of translating data structures into a readable format to be sent to the server. This is specific to the HackerYou proxy, because it expects the data to be sent in a very specific way.

In order for us to use this method properly, we will need to install the querystring parsing and stringifying library as a dependency by running the following command:

```javascript
npm install qs --save-dev
```

Next, we will need to import the module inside of our file like this:

```javascript
//React:
import Qs from 'qs';

//if you're not using React, use your filepath to import the `qs.js` file
  <script src="node_modules/qs/dist/qs.js"></script>
```

Now we are able to use the `paramsSerializer` method inside of our AJAX request like so:

```javascript
axios({
  url: 'http://proxy.hackeryou.com',
  dataResponse:'json',
  paramsSerializer: function(params) {
    return Qs.stringify(params, {arrayFormat: 'brackets'})
  },
  params: {
    reqUrl: 'http://api.site.com/api',
    params: {
      queryParam: 'value'
    }, 
    proxyHeaders: {
      'header_params': 'value'
    },
    xmlToJSON: false
  }
  }).then((res) => {
    console.log(res);
  });
```

This will take the nested `params` key inside of `params`(sorry there are so many params!) and make it look like this `params[queryParam]:'value'`.
